<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:ServerMonitor.ViewModels"
             xmlns:microcharts="clr-namespace:Microcharts.Maui;assembly=Microcharts.Maui"
             x:Class="ServerMonitor.GraphicsPage"
             x:DataType="vm:GraphicsViewModel"
             BackgroundColor="LightGray"
             Padding="10">

    <Grid RowDefinitions="Auto,Auto,Auto,*">

        <Label Grid.Row="0"
               Text="GrÃ¡ficos del Servidor"
               FontSize="28"
               FontAttributes="Bold"
               FontFamily="verdana"
               HorizontalOptions="Center"
               TextColor="#212121"
               Margin="0,15,0,10"/>

        <Border Grid.Row="1"
                Stroke="#BDBDBD"
                StrokeThickness="1"
                StrokeShape="RoundRectangle 12"
                BackgroundColor="White"
                Padding="15"
                Margin="0,0,0,20">
            <VerticalStackLayout Spacing="10">
                <Label Text="Filtrar por Sensor" FontAttributes="Bold" FontFamily="times" HorizontalOptions="Center"/>
                <Grid ColumnDefinitions="*,Auto,*" ColumnSpacing="10">
                    <VerticalStackLayout Grid.Column="0">
                        <Label Text="Fecha" VerticalOptions="Center" FontFamily="times" FontAttributes="Bold"/>
                        <DatePicker Date="{Binding SelectedDate}" TextColor="#212121"/>
                    </VerticalStackLayout>
                    <Button Grid.Column="1"
                            Text="Filtrar"
                            Command="{Binding FilterByDateCommand}"
                            BackgroundColor="#4d62da"
                            TextColor="White"
                            CornerRadius="8"
                            FontFamily="verdana"
                            Padding="15,8"
                            VerticalOptions="End"/>
                    <VerticalStackLayout Grid.Column="2">
                        <Label Text="Sensor:" VerticalOptions="Center" FontFamily="times" FontAttributes="Bold"/>
                        <Picker ItemsSource="{Binding Sensors}"
                                SelectedItem="{Binding SelectedSensor}"
                                WidthRequest="120"/>
                    </VerticalStackLayout>
                </Grid>
            </VerticalStackLayout>
        </Border>

        <ScrollView Grid.Row="2">
            <Border Stroke="#BDBDBD"
                    StrokeThickness="2"
                    StrokeShape="RoundRectangle 15"
                    BackgroundColor="#FFFFFF"
                    Padding="15"
                    Margin="0,0,0,10"
                    HorizontalOptions="Fill">
                <microcharts:ChartView Chart="{Binding Chart}"
                                       HeightRequest="450"
                                       HorizontalOptions="FillAndExpand"
                                       VerticalOptions="FillAndExpand"/>
            </Border>
        </ScrollView>

    </Grid>

</ContentPage>